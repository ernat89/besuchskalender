<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Admin – All-Day-Blocker</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <h1>Admin: All-Day-Block setzen</h1>
  <form id="blockForm">
    <label for="blockDate">Datum (JJJJ-MM-TT):</label>
    <input type="date" id="blockDate" required/>
    <button type="submit">Blockieren</button>
  </form>
  <div id="msg"></div>

  <script>
    document.getElementById("blockForm").addEventListener("submit", async e=>{
      e.preventDefault();
      const date = e.target.blockDate.value;
      const res  = await fetch("/api/block", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({date})
      });
      const msg = document.getElementById("msg");
      if (res.ok) {
        msg.textContent = "✅ All-Day-Blocker gesetzt.";
      } else {
        const txt = await res.text();
        msg.textContent = "❌ "+txt;
      }
    });
  </script>
</body>
</html>
